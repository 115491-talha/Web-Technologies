<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Todo ‚Äî Mini Project</title>

  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#ff8a00;
      --muted:#94a3b8; --glass: rgba(255,255,255,0.03);
      --success:#22c55e;
      --radius:12px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:linear-gradient(180deg,#061021 0%,#081426 60%);
      color:#e6eef8; padding:20px;
    }

    .container{
      width:100%; max-width:760px; background:linear-gradient(180deg,var(--card), #041025);
      border-radius:var(--radius); padding:22px; box-shadow:0 8px 30px rgba(2,6,23,0.6);
      backdrop-filter: blur(6px);
    }

    header{display:flex; align-items:center; gap:12px; margin-bottom:14px}
    h1{font-size:20px; margin:0; letter-spacing:0.4px}
    .sub{color:var(--muted); font-size:13px}

    .add-area{display:flex; gap:10px; margin:16px 0}
    .add-area input{
      flex:1; padding:12px 14px; border-radius:10px; border:1px solid var(--glass);
      background:transparent; color:inherit; outline:none; font-size:15px;
      transition:box-shadow .18s;
    }
    .add-area input:focus{box-shadow:0 0 0 4px rgba(255,138,0,0.06); border-color:rgba(255,138,0,0.28)}
    .btn{
      padding:0 14px; border-radius:10px; height:44px; display:inline-flex; align-items:center;
      justify-content:center; cursor:pointer; user-select:none; border:none; font-weight:600;
      background:var(--accent); color:#061021;
    }
    .btn.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted)}

    .list{margin-top:8px; border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,0.03)}
    .item{
      display:flex; gap:12px; align-items:center; padding:12px 14px; background:transparent;
      border-bottom:1px solid rgba(255,255,255,0.02);
    }
    .item:last-child{border-bottom:0}
    .item .check{width:20px; height:20px; border-radius:6px; border:2px solid var(--muted); display:inline-grid; place-items:center; cursor:pointer}
    .item.completed .check{background:var(--success); border-color:transparent; color:#02210b}
    .text{flex:1; font-size:15px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
    .item.completed .text{ text-decoration:line-through; color:var(--muted) }

    .actions{display:flex; gap:8px; align-items:center}
    .icon-btn{background:transparent; border:0; color:var(--muted); cursor:pointer}
    .icon-btn:hover{color:#fff}

    .meta{display:flex; justify-content:space-between; align-items:center; gap:12px; padding:10px 6px; color:var(--muted); font-size:13px}
    .filters{display:flex; gap:8px; align-items:center}
    .filter{padding:6px 10px; border-radius:8px; cursor:pointer; background:transparent; border:1px solid transparent}
    .filter.active{background:rgba(255,255,255,0.03); border-color:rgba(255,255,255,0.04); color:#fff}

    /* small screens */
    @media (max-width:480px){
      .container{padding:16px}
      .add-area input{font-size:14px}
    }

    /* simple transitions */
    .fade{transition:opacity .18s, transform .18s}
    .item{transition:background .15s}
  </style>
</head>
<body>
  <main class="container" aria-labelledby="title">
    <header>
      <div>
        <h1 id="title">Todo ‚Ä¢ Mini Project</h1>
        <div class="sub">HTML ‚Ä¢ CSS ‚Ä¢ Vanilla JS ‚Ä¢ localStorage</div>
      </div>
    </header>

    <section class="add-area" aria-label="Add todo">
      <input id="todoInput" placeholder="Add new task and press Enter..." aria-label="Todo input" />
      <button id="addBtn" class="btn">Add</button>
    </section>

    <section class="list" id="todoList" aria-live="polite"></section>

    <div class="meta">
      <div id="count">0 items</div>
      <div class="filters" role="tablist" aria-label="Filter todos">
        <button class="filter active" data-filter="all">All</button>
        <button class="filter" data-filter="active">Active</button>
        <button class="filter" data-filter="completed">Completed</button>
      </div>
      <div>
        <button id="clearCompleted" class="btn ghost">Clear Completed</button>
      </div>
    </div>
  </main>

  <script>
    /* --------- Simple Todo App (vanilla JS) --------- */
    const STORAGE_KEY = 'mini_todos_v1';

    // state
    let todos = []; // {id, text, done}
    let filter = 'all';

    // elements
    const input = document.getElementById('todoInput');
    const addBtn = document.getElementById('addBtn');
    const list = document.getElementById('todoList');
    const countEl = document.getElementById('count');
    const filters = document.querySelectorAll('.filter');
    const clearBtn = document.getElementById('clearCompleted');

    // init
    load();
    render();

    // events
    addBtn.addEventListener('click', onAdd);
    input.addEventListener('keydown', e => { if (e.key === 'Enter') onAdd(); });
    list.addEventListener('click', onListClick);
    list.addEventListener('dblclick', onEditStart);
    filters.forEach(f => f.addEventListener('click', onFilter));
    clearBtn.addEventListener('click', onClearCompleted);

    // helpers
    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(todos)); }
    function load(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        todos = raw ? JSON.parse(raw) : [];
      } catch(e){
        todos = [];
      }
    }

    function uid(){ return Date.now().toString(36) + Math.random().toString(36).slice(2,6); }

    function onAdd(){
      const text = input.value.trim();
      if(!text) return input.focus();
      todos.unshift({ id: uid(), text, done:false });
      input.value = '';
      save(); render();
    }

    function onListClick(e){
      const target = e.target;
      const itemEl = target.closest('.item');
      if(!itemEl) return;
      const id = itemEl.dataset.id;

      // toggle check
      if(target.classList.contains('check') || target.closest('.check')){
        toggleDone(id);
        return;
      }

      // delete
      if(target.dataset.action === 'delete'){
        removeTodo(id);
        return;
      }

      // edit save
      if(target.dataset.action === 'save'){
        const inputEl = itemEl.querySelector('.edit-input');
        finishEdit(id, inputEl.value.trim());
        return;
      }

      // cancel edit
      if(target.dataset.action === 'cancel'){
        cancelEdit(itemEl);
        return;
      }
    }

    function toggleDone(id){
      todos = todos.map(t => t.id === id ? ({...t, done: !t.done}) : t);
      save(); render();
    }

    function removeTodo(id){
      todos = todos.filter(t => t.id !== id);
      save(); render();
    }

    function onEditStart(e){
      const itemEl = e.target.closest('.item');
      if(!itemEl) return;
      startEdit(itemEl.dataset.id, itemEl);
    }

    function startEdit(id, itemEl){
      const todo = todos.find(t => t.id === id);
      if(!todo) return;
      // replace content with input
      itemEl.classList.add('editing');
      itemEl.innerHTML = `
        <div style="flex:1">
          <input class="edit-input" value="${escapeHtml(todo.text)}" style="width:100%; padding:8px 10px; border-radius:6px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit;" />
        </div>
        <div class="actions">
          <button class="icon-btn" data-action="save">üíæ</button>
          <button class="icon-btn" data-action="cancel">‚úñ</button>
        </div>
      `;
      const editInput = itemEl.querySelector('.edit-input');
      editInput.focus();
      editInput.setSelectionRange(editInput.value.length, editInput.value.length);

      // keyboard: Enter to save, Esc to cancel
      editInput.addEventListener('keydown', function handler(ev){
        if(ev.key === 'Enter'){ finishEdit(id, editInput.value.trim()); editInput.removeEventListener('keydown', handler); }
        if(ev.key === 'Escape'){ cancelEdit(itemEl); editInput.removeEventListener('keydown', handler); }
      });
    }

    function finishEdit(id, newText){
      if(!newText){ removeTodo(id); return; } // empty -> delete
      todos = todos.map(t => t.id === id ? ({...t, text:newText}) : t);
      save(); render();
    }

    function cancelEdit(itemEl){
      render(); // simple: re-render to original
    }

    function onFilter(e){
      filters.forEach(f => f.classList.remove('active'));
      e.currentTarget.classList.add('active');
      filter = e.currentTarget.dataset.filter;
      render();
    }

    function onClearCompleted(){
      todos = todos.filter(t => !t.done);
      save(); render();
    }

    function render(){
      // filter
      let visible = todos;
      if(filter === 'active') visible = todos.filter(t => !t.done);
      if(filter === 'completed') visible = todos.filter(t => t.done);

      // build html
      list.innerHTML = visible.map(t => `
        <div class="item fade ${t.done ? 'completed' : ''}" data-id="${t.id}">
          <div class="check" role="button" aria-label="${t.done? 'Mark as active':'Mark as done'}">
            ${t.done ? '‚úì' : ''}
          </div>
          <div class="text" title="${escapeHtml(t.text)}">${escapeHtml(t.text)}</div>
          <div class="actions" aria-hidden="true">
            <button class="icon-btn" title="Edit (double click)">‚úèÔ∏è</button>
            <button class="icon-btn" data-action="delete" title="Delete">üóëÔ∏è</button>
          </div>
        </div>
      `).join('');

      // count
      const remaining = todos.filter(t => !t.done).length;
      countEl.textContent = `${remaining} item${remaining!==1 ? 's' : ''}`;

      // if empty show placeholder
      if(todos.length === 0){
        list.innerHTML = `<div style="padding:20px; color:var(--muted); text-align:center">No todos yet ‚Äî add something!</div>`;
      }
    }

    // small helper to escape html (prevent injection)
    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
  </script>
</body>
</html>
